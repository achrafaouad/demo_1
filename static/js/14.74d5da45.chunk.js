(window["webpackJsonpcorona-react"]=window["webpackJsonpcorona-react"]||[]).push([[14],{590:function(e,t,a){"use strict";a.r(t);var n=a(11),l=a(12),o=a(14),r=a(13),i=a(15),c=a(0),s=a.n(c),u=a(376),d=a(377),m=a.n(d),h=a(379),p=a(49),g=a(350),f=a(355),b=a(572),E=a(415),v=a(416),y=a(561),w=a(264),_=a(353),C=a(299),N=a(259),O=a(301),S=a(302),x=a(380),j=a.n(x),k=a(135),I=(a(385),a(306)),T=a(417),P=a(571),G=a(27),F=(a(223),a(201)),V=a(589),L=(a(386),a(410)),A=a(183),B=a(586),M=a(588),z=a(585),R=a(587),U=B.a.Option,D=[{label:"Apple",value:"Apple"},{label:"Pear",value:"Pear"}],J=[{label:"oui",value:!0},{label:"non",value:!1}],Z=M.a.TextArea,q=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(r.a)(t).call(this,e))).showModal=function(){a.setState({visible:!0})},a.handleOk=function(e){fetch("http://localhost:3001/add_foncier",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nom:a.state.nom,surface:a.props.surface,geometry:a.props.last_feature,id_exp:4,prix_loue:a.state.prix_loue,proprietaire:a.state.proprietaire,date_loue:a.state.date_loue,prix_achat:a.state.prix_achat,date_achat:a.state.date_achat})}).then((function(e){if(e.ok)return e.json();throw new Error("request failed")}),(function(e){return console.log(e)})).then((function(e){fetch("http://localhost:3001/add_exploitation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({nom:a.state.nom,date_exploitation:a.state.date_exploitation,id_foncier:e.data,batiment:String(a.state.batiment),note:a.state.prix_achat,culture_permanent:String(a.state.culture_permanent),source_eau:String(a.state.source_eau)})}).then((function(e){if(e.ok)return e.json();throw new Error("request failed")}),(function(e){return console.log(e)})).then((function(e){console.log(e)}))})),a.setState({visible:!1})},a.handleCancel=function(e){console.log(e),a.setState({visible:!1})},a.onChange3=function(e){console.log("radio3 checked",e.target.value),a.setState({value3:e.target.value})},a.state={visible:a.props.visible,typeFoncier:!1,production:"animal"},a.handleOk=a.handleOk.bind(Object(p.a)(a)),a.handleCancel=a.handleCancel.bind(Object(p.a)(a)),a.showModal=a.showModal.bind(Object(p.a)(a)),a.onChange3=a.onChange3.bind(Object(p.a)(a)),a.handlechange=a.handlechange.bind(Object(p.a)(a)),a.onChange_date=a.onChange_date.bind(Object(p.a)(a)),a.onChange_date=a.onChange_date.bind(Object(p.a)(a)),a.onChange_date_2=a.onChange_date_2.bind(Object(p.a)(a)),a.handleChange_value=a.handleChange_value.bind(Object(p.a)(a)),a.handleChange_value=a.handleChange_value.bind(Object(p.a)(a)),a.handleChange_value_production=a.handleChange_value_production.bind(Object(p.a)(a)),a.onChange_date_exploitation=a.onChange_date_exploitation.bind(Object(p.a)(a)),a}return Object(i.a)(t,e),Object(l.a)(t,[{key:"handlechange",value:function(e){var t=e.target;console.log("ello"),this.setState(Object(G.a)({},t.name,t.value)),console.log(this.state)}},{key:"handleChange_value",value:function(e){this.setState({typeFoncier:e})}},{key:"handleChange_value_production",value:function(e){this.setState({production:e})}},{key:"onChange_date",value:function(e,t){console.log(e,t),this.setState({date_loue:t})}},{key:"onChange_date_2",value:function(e,t){console.log(e,t),this.setState({date_achat:t})}},{key:"onChange_date_exploitation",value:function(e,t){console.log(e,t),this.setState({date_exploitation:t})}},{key:"render",value:function(){var e=this.state.value3;return console.log("props",this.props),console.log(this.props.last_feature),s.a.createElement("div",null,s.a.createElement(F.a,{id:"infoAdd",type:"primary",onClick:this.showModal},"Open"),s.a.createElement(V.a,{title:"Basic Modal",visible:this.state.visible,onOk:this.handleOk,onCancel:this.handleCancel},s.a.createElement("p",null,"Nom"),s.a.createElement(M.a,{placeholder:"Basic usage",name:"nom",value:this.state.nom,onChange:this.handlechange}),s.a.createElement("br",null),s.a.createElement("p",null,"surface"),s.a.createElement(L.a,{className:"mb-3"},s.a.createElement(A.a,{placeholder:"surface",name:"surface",value:this.props.surface,"aria-label":"Recipient's username","aria-describedby":"basic-addon2",onChange:this.handlechange}),s.a.createElement(L.a.Text,{id:"basic-addon2"},"ha")),s.a.createElement("p",null,"foncier"),s.a.createElement(B.a,{name:"typeFoncier",defaultValue:"poss\xe9d\xe9e",value:this.state.typeFoncier,style:{width:120},onChange:this.handleChange_value},s.a.createElement(U,{value:"lou\xe9"},"Lou\xe9"),s.a.createElement(U,{value:"poss\xe9d\xe9e"},"poss\xe9d\xe9e")),s.a.createElement("br",null),s.a.createElement("br",null),"lou\xe9"===this.state.typeFoncier?s.a.createElement("div",null," ",s.a.createElement("p",null,"prix_loue"),s.a.createElement(L.a,{className:"mb-3"},s.a.createElement(A.a,{placeholder:"Recipient's username",name:"prix_loue","aria-label":"Recipient's username","aria-describedby":"basic-addon2",onChange:this.handlechange}),s.a.createElement(L.a.Text,{id:"basic-addon2"},"$")),s.a.createElement("p",null,"proprietaire"),s.a.createElement(M.a,{placeholder:"proprietaire",name:"proprietaire",onChange:this.handlechange}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("p",null,"Date loue"),s.a.createElement(z.a,{onChange:this.onChange_date})," "):s.a.createElement("div",null),"poss\xe9d\xe9e"===this.state.typeFoncier&&s.a.createElement("div",null,s.a.createElement("p",null,"prix_d'achat"),s.a.createElement(L.a,{className:"mb-3"},s.a.createElement(A.a,{placeholder:"Recipient's username",name:"prix_achat","aria-label":"Recipient's username","aria-describedby":"basic-addon2",onChange:this.handlechange}),s.a.createElement(L.a.Text,{id:"basic-addon2"},"$")),s.a.createElement("p",null,"Date d'achat"),s.a.createElement(z.a,{onChange:this.onChange_date_2})),s.a.createElement("p",null,"type de production"),s.a.createElement(B.a,{defaultValue:"animal",style:{width:120},onChange:this.handleChange_value_production},s.a.createElement(U,{value:"animal"},"animal"),s.a.createElement(U,{value:"v\xe9g\xe9tale"},"v\xe9g\xe9tale")),"animal"===this.state.production&&s.a.createElement(s.a.Fragment,null,s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("p",null,"\xe0 une batiment ?"),s.a.createElement(R.a.Group,{options:J,name:"batiment",onChange:this.handlechange,value:this.state.batiment,optionType:"button",buttonStyle:"solid"})),"v\xe9g\xe9tale"===this.state.production&&s.a.createElement(s.a.Fragment,null,s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement("p",null,"errig\xe9e ?"),s.a.createElement(R.a.Group,{options:J,name:"errige",onChange:this.handlechange,value:this.state.errige,optionType:"button",buttonStyle:"solid"}),s.a.createElement("br",null),s.a.createElement("p",null,"culture permanent ?"),s.a.createElement(R.a.Group,{options:J,name:"culture_permanent",onChange:this.handlechange,value:this.state.culture_permanent,optionType:"button",buttonStyle:"solid"}),s.a.createElement("p",null,"source d'eau ?"),s.a.createElement(R.a.Group,{options:J,name:"source_eau",onChange:this.handlechange,value:this.state.source_eau,optionType:"button",buttonStyle:"solid"})),s.a.createElement("br",null),s.a.createElement("p",null,"Date d'exploitation"),s.a.createElement(z.a,{onChange:this.onChange_date_exploitation}),s.a.createElement("p",null,"donner une note sur cette production"),s.a.createElement(Z,{rows:2,name:"note",onChange:this.handlechange}),s.a.createElement("br",null),s.a.createElement("br",null),s.a.createElement(R.a.Group,{options:D,onChange:this.onChange3,value:e,optionType:"button",buttonStyle:"solid"})))}}]),t}(s.a.Component),W=a(570),H=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(r.a)(t).call(this,e))).state={center:[-777823.1998299537,3502650.384139917],zoom:5,source:new _.a({wrapX:!1}),classname:!1,last_feature:{},surface:0,visible:!1},a.vector=new C.a({source:a.state.source,updateWhileInteracting:!0,style:new N.c({fill:new O.a({color:"rgba(255, 255, 255, 0.2)"}),stroke:new S.a({color:"#ffcc33",width:2})})}),a.draw="",a.olmap=new g.a({target:null,controls:[new E.a,new v.a,new I.a,new T.a,new P.a],layers:[new b.a({source:new y.a({url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"})}),a.vector],view:new f.a({center:a.state.center,zoom:a.state.zoom,minZoom:2})}),a.format=new W.a,a.handleSelect=a.handleSelect.bind(Object(p.a)(a)),a.addInteraction=a.addInteraction.bind(Object(p.a)(a)),console.log(a.props),a}return Object(i.a)(t,e),Object(l.a)(t,[{key:"handleSelect",value:function(){}},{key:"updateMap",value:function(){console.log("update_map"),this.olmap.getView().setCenter(this.state.center),this.olmap.getView().setZoom(this.state.zoom)}},{key:"forceUpdateHandler",value:function(){this.forceUpdate()}},{key:"componentDidMount",value:function(){var e=Object(h.a)(m.a.mark((function e(){var t=this;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("hello world ha l map"),this.olmap.setTarget("map"),e.next=4,fetch("http://localhost:3001/get_foncier",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:this.props.userInfo.user.id})}).then((function(e){if(e.ok)return e.json();throw new Error("request failed")}),(function(e){return console.log(e)})).then((function(e){return console.log(e),console.log("ha les pqrcel"),e}));case 4:e.sent,this.olmap.on("moveend",(function(){var e=t.olmap.getView().getCenter(),a=t.olmap.getView().getZoom();t.setState({center:e,zoom:a})})),document.getElementById("submit_par").addEventListener("click",(function(){t.olmap.removeInteraction(t.draw)})),document.getElementById("drow_polygone").addEventListener("click",(function(){document.getElementById("undo").style.visibility="visible",document.getElementById("submit_par").style.visibility="visible",t.setState({classname:!0}),t.olmap.removeInteraction(t.draw),t.addInteraction()})),this.mediumLow=new _.a,this.mediumLowVector=new C.a({title:"medium low Risk",source:this.mediumLow,style:new N.c({stroke:new S.a({width:1}),fill:new O.a({color:"#FFC100"})})}),this.state.parcels.forEach((function(e){var a=e.geometry;JSON.stringify(a);t.mediumLow.addFeatures(t.format.readFeatures(a,{featureProjection:"EPSG:3857"})),console.log(t.format.readFeatures(a,{featureProjection:"EPSG:3857"}))})),this.olmap.addLayer(this.mediumLowVector),this.forceUpdate(),this.olmap.on("click",(function(e){t.olmap.forEachFeatureAtPixel(e.pixel,(function(e,t){console.log(e.getKeys()),console.log(t)}))})),document.getElementById("undo").addEventListener("click",(function(){t.draw&&t.draw.removeLastPoint()}));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addInteraction",value:function(){var e=this;this.draw=new w.a({source:this.state.source,type:"Polygon"}),document.getElementById("undo").style.visibility="visible",this.olmap.addInteraction(this.draw),this.updateMap(),this.state.source.on("addfeature",(function(t){var a=t.feature,n=a.getGeometry(),l=e.format.writeGeometry(n);e.last_feature=l,console.log(a.getGeometry().getArea()),e.surface=a.getGeometry().getArea()/1e4,e.setState({surface:e.surface,last_feature:e.last_feature}),e.forceUpdate(),console.log("hana",e.last_feature)}))}},{key:"shouldComponentUpdate",value:function(e,t){var a=this.olmap.getView().getCenter(),n=this.olmap.getView().getZoom();return a!==t.center||n!==t.zoom}},{key:"CenterMap",value:function(e,t){console.log("Long: "+e+" Lat: "+t),this.flyTo(Object(k.f)([e,t],"EPSG:4326","EPSG:3857"),(function(){}))}},{key:"flyTo",value:function(e,t){var a=this.olmap.getView().getZoom(),n=2,l=!1;function o(e){--n,l||0!==n&&e||(l=!0,t(e))}this.olmap.getView().animate({center:e,duration:2e3},o),this.olmap.getView().animate({zoom:a-1,duration:1e3},{zoom:a+1,duration:1e3},o)}},{key:"render",value:function(){var e=this;return console.log("state of render ",this.state),s.a.createElement("div",null,s.a.createElement("div",{className:"d-flex justify-content-center"},s.a.createElement("div",{className:"d-grid gap-2 d-md-flex justify-content-md-end  add_polygone grid-margin"},s.a.createElement(q,{user:this.props.user,last_feature:this.state.last_feature,surface:this.state.surface,visible:this.state.visible}),s.a.createElement("button",{className:"btn btn-warning me-md-2 ",type:"button",id:"submit_par",style:{visibility:"hidden"}},"submit"),s.a.createElement("button",{visible:!0,type:"button",className:"btn btn-success btn-fw ",id:"drow_polygone"},"+ Add polygone"),s.a.createElement("button",{className:"btn btn-danger me-md-2 ",type:"button",id:"undo",style:{visibility:"hidden"}},"undo")),s.a.createElement("div",{className:"input-group p-2 bd-highlight ",style:{width:"30%",height:"auto",margin:"20px"}},s.a.createElement(j.a,{className:"input-group flex-nowrap my_input",style:{width:"100%"},onPlaceSelected:function(t){console.log("Places",t.geometry.location.lat(),t.geometry.location.lng()),e.CenterMap(t.geometry.location.lng(),t.geometry.location.lat())},types:["(regions)"],componentRestrictions:{country:"ma"}}))),s.a.createElement("div",{id:"map",className:"grid-margin",style:{width:"100%",height:"auto"}}," "))}}]),t}(c.Component);a.d(t,"Dashboard",(function(){return $}));var K={BZ:75,US:56.25,AU:15.45,GB:25,RO:10.25,GE:33.25},$=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(r.a)(t).call(this,e))).transactionHistoryOptions={responsive:!0,maintainAspectRatio:!0,segmentShowStroke:!1,cutoutPercentage:70,elements:{arc:{borderWidth:0}},legend:{display:!1},tooltips:{enabled:!0}},a.sliderSettings={infinite:!0,speed:500,slidesToShow:1,slidesToScroll:1},console.log("achraf"),console.log("hana f dashboard",a.props.userInfo),a.props.userInfo&&(a.state={userInfo:a.props.userInfo},a.forceUpdate()),a}return Object(i.a)(t,e),Object(l.a)(t,[{key:"toggleProBanner",value:function(){document.querySelector(".proBanner").classList.toggle("hide")}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"row "},s.a.createElement("div",{className:"col-12 grid-margin"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h4",{className:"card-title"},"My map"),s.a.createElement(H,{userInfo:this.state.userInfo}))))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-12"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h4",{className:"card-title"},"Visitors by Countries"),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-5"},s.a.createElement("div",{className:"table-responsive"},s.a.createElement("table",{className:"table"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("i",{className:"flag-icon flag-icon-us"})),s.a.createElement("td",null,"USA"),s.a.createElement("td",{className:"text-right"}," 1500 "),s.a.createElement("td",{className:"text-right font-weight-medium"}," 56.35% ")),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("i",{className:"flag-icon flag-icon-de"})),s.a.createElement("td",null,"Germany"),s.a.createElement("td",{className:"text-right"}," 800 "),s.a.createElement("td",{className:"text-right font-weight-medium"}," 33.25% ")),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("i",{className:"flag-icon flag-icon-au"})),s.a.createElement("td",null,"Australia"),s.a.createElement("td",{className:"text-right"}," 760 "),s.a.createElement("td",{className:"text-right font-weight-medium"}," 15.45% ")),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("i",{className:"flag-icon flag-icon-gb"})),s.a.createElement("td",null,"United Kingdom"),s.a.createElement("td",{className:"text-right"}," 450 "),s.a.createElement("td",{className:"text-right font-weight-medium"}," 25.00% ")),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("i",{className:"flag-icon flag-icon-ro"})),s.a.createElement("td",null,"Romania"),s.a.createElement("td",{className:"text-right"}," 620 "),s.a.createElement("td",{className:"text-right font-weight-medium"}," 10.25% ")),s.a.createElement("tr",null,s.a.createElement("td",null,s.a.createElement("i",{className:"flag-icon flag-icon-br"})),s.a.createElement("td",null,"Brasil"),s.a.createElement("td",{className:"text-right"}," 230 "),s.a.createElement("td",{className:"text-right font-weight-medium"}," 75.00% ")))))),s.a.createElement("div",{className:"col-md-7"},s.a.createElement("div",{id:"audience-map",className:"vector-map"}),s.a.createElement(u.VectorMap,{map:"world_mill",backgroundColor:"transparent",panOnDrag:!0,containerClassName:"dashboard-vector-map",focusOn:{x:.5,y:.5,scale:1,animate:!0},series:{regions:[{scale:["#3d3c3c","#f2f2f2"],normalizeFunction:"polynomial",values:K}]}}))))))))}}]),t}(c.Component);t.default=$}}]);
//# sourceMappingURL=14.74d5da45.chunk.js.map